{% extends 'reports/reports_base.html' %}

{% block title %}Summary View - PDF Accessibilty Inspector{% endblock%}

{% block content %}<h2 id="doc_acc">Document Accessibility</h2>
<table class="document" aria-labelledby="doc_acc">
	<tbody>
		<tr>
			<th>Document Tagged: </th>
			{%if tagged%} <td>Yes</td>
			{%else%} <td class = "v"> No tags, document must be tagged to be accessible </td>
			{%endif%}
		</tr>
		<tr>
			<th>Document Title: </th>
			{% if title != ''%} <td>{{title}}</td>
			{%else%} <td class = "v"> No title, documents must be titled to be accessible </td>
			{%endif%}
		</tr>
		<tr>
			<th>Number of Pages: </th>
			{%if numpages > 0 %} <td>{{numpages}}</td>
			{%else%} <td class = "v">unknown</td>
			{%endif%}
		</tr>
		<tr>
			<th>Has Headers: </th>
			{%if headed%} <td>Yes</td>
			{%else%} <td class = "v">document has no header</td>
			{%endif%}
		</tr>
		<tr>
			<th>Filename: </th>
			<td>{{filename}}</td>
		</tr>
	</tbody>
</table>
<form action="." method="post" enctype="multipart/form-data">
	{% csrf_token %} <label for="id_notes">Accessibility Notes</label>
	{{form.notes}}
	<input type="submit" value="Save Notes" />
</form>
<h2>Tag Accessibility</h2>
<p>
	Total number of tags in document: {{numtags}}
</p>
<div class="tag_summary">
	<h3 id="tag_summ">Tag Accessibility Summary</h3>
	<table class="summary" aria-labelledby="tag_summ">
		<tbody>
			<tr>
				<th>Violations: </th>
				<td class="v">{{tot_fail}}</td>
			</tr>
			<tr>
				<th>Manual Checks: </th>
				<td class="mc">{{tot_ins}}</td>
			</tr>
		</tbody>
	</table>
</div>
{%for tuple in content%}
<div class="tag_summary">
	<h3 id = "{{tuple.0}}">{{tuple.0}} Tags</h3>
	<p>
		Number of {{tuple.0}} tags: {{ tuple.1}}
	</p>
	<table class="rules" aria-labelledby="{{tuple.0}}">
		<thead>
			<tr>
				<th>Accessibility Requirement</th>
				<th>Violation</th>
				<th>Manual Inspection</th>
			</tr>
		</thead>
		<tbody>
			{% for row in tuple.2 %}
			<tr class = "{% if forloop.counter|divisibleby:2 %}even{% else %}{% endif %}">
				<th>{{row.0}}</th>
				<td class = "v">{%if tagged %} {%if row.2 == 0 and row.3 == 0%}No {{tuple.0}} tag violations{%else%} {{row.2}} {%endif%}{%else%} document is not tagged {%endif%}</td>
				{%if tagged %} {% if row.2 == 0 and row.3 == 0%}<td class = "v">No {{tuple.0}} tag manual checks</td>{%else%} <td class = "z">{{row.3}} </td>{%endif%}{%else%} <td class = "v">document is not tagged </td>	{%endif%}
				{% endfor %}
		</tbody>
	</table>
</div>
{%endfor%}
{% endblock %} 